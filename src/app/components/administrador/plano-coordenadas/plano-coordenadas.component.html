<div class="container">
    <aside class="left">
        <div class="logo">
            <img src="assets/icon/logo.jpg" alt="Logo del Centro Comercial Nuevo Tarqui" />
        </div>
        <nav>
            <ul>
                <li><a (click)="irAPagina('inicio')">üè† Inicio</a></li>
                <li><a (click)="irAPagina('locales')">üìç Locales</a></li>
                <li><a (click)="irAPagina('socios')">üßë‚Äçü§ù‚Äçüßë Socios</a></li>
                <li><a (click)="irAPagina('oferta')">üè∑ Ofertas</a></li>
                <li><a (click)="irAPagina('plano_contenedores')" class="active">üöõ Contenedores</a></li>
                <li><a (click)="irAPagina('producto')" >üì¶ Productos</a></li>
            </ul>
        </nav>
        <nav>
            <ul>
                <li><a href="#Usuario">üë§ Usuario</a></li>
                <li><a href="#config">‚öôÔ∏è Configuraci√≥n</a></li>
            </ul>
        </nav>
    </aside>

    <main>
        <div class="datos">
            <!-- T√≠tulo din√°mico para el formulario (Crear vs. Editar) -->
            <h2>{{ isEditing ? 'Editar Contenedor' : 'Ingresar Nuevo Contenedor' }}</h2>
            <div class="form-container">
                <div class="form-group">
                    <label for="numeroContenedor">N√∫mero de Contenedor</label>
                    <input id="numeroContenedor" type="text" [(ngModel)]="numeroContenedor" />
                </div>

                <div class="form-group">
                    <label for="bloque">Bloque</label>
                    <input id="bloque" type="text" [(ngModel)]="bloque" />
                </div>

                <div class="form-group">
                    <label for="socio">Socio</label>
                    <!-- El valor seleccionado es el id_socio, y se muestra el nombre -->
                    <select id="socio" [(ngModel)]="socioSeleccionado">
                        <option [ngValue]="null">Seleccionar Socio</option>
                        <option *ngFor="let socio of socios" [ngValue]="socio.id_socio">{{ socio.nombres }}</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="coordenadas">Coordenadas (Dibuja o edita en el mapa)</label>
                    <pre id="coordenadas">{{ coordenadasTexto }}</pre>
                </div>

                <div class="boton-acciones">
                    <!-- Bot√≥n principal de guardar/actualizar, cambia el texto y la acci√≥n seg√∫n el modo -->
                    <button (click)="guardarOActualizarContenedor()">
                        {{ isEditing ? 'Actualizar Contenedor' : 'Guardar Contenedor' }}
                    </button>
                    <!-- Bot√≥n para cancelar la edici√≥n, solo visible en modo edici√≥n -->
                    <button *ngIf="isEditing" (click)="resetForm()" class="btn-cancelar">Cancelar Edici√≥n</button>
                </div>
            </div>
        </div>

        <div class="container-mapa">
            <div id="map"></div>
        </div>

        <h2>Lista de Contenedores</h2>
        <table>
            <thead>
                <tr>
                    <th>N√∫mero</th>
                    <th>Bloque</th>
                    <th>Socio</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Resalta la fila si el contenedor est√° seleccionado para edici√≥n -->
                <tr *ngFor="let contenedor of contenedores" [class.selected]="contenedor === contenedorSeleccionado">
                    <td>{{ contenedor.numero_contenedor }}</td>
                    <td>{{ contenedor.bloque }}</td>
                    <!-- Muestra el nombre del socio usando el m√©todo del componente -->
                    <td>{{ getSocioNombre(contenedor.socioId) }}</td>
                    <td>
                        <!-- Bot√≥n "Seleccionar" que carga el contenedor para edici√≥n -->
                        <button (click)="selectContenedor(contenedor)"
                            [disabled]="isEditing && contenedor === contenedorSeleccionado"
                            [class.active-selection]="isEditing && contenedor === contenedorSeleccionado">
                            {{ (isEditing && contenedor === contenedorSeleccionado) ? 'Seleccionado' : 'Seleccionar' }}
                        </button>
                        <!-- Bot√≥n "Eliminar" solo habilitado para el contenedor seleccionado para eliminar -->
                        <button (click)="deleteContenedor()"
                            [disabled]="contenedor !== contenedorSeleccionado">Eliminar</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </main>
</div>